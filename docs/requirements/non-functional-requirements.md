# Non-Functional Requirements (NFR)

## 1. 信頼性 / 可用性
- **稼働率**: 99.5% (月次) 以上。
- **障害復旧時間**: 重大障害は 4 時間以内に復旧、軽微障害は 1 営業日以内。
- **データバックアップ**: 毎日フルバックアップ、保持期間 30 日。

## 2. パフォーマンス
- **ページ初期表示**: 3 秒以内 (Core Web Vitals LCP 目標 2.5 秒未満)。
- **API レスポンス**: 95 パーセンタイルで 800ms 以内。
- **ロケーション数**: 500 店舗まで性能劣化なし、1,000 店舗時もレスポンス 1.5 秒以内を目標。

## 3. スケーラビリティ
- **マルチテナント対応**: テナント毎にデータ隔離。
- **スケーリング**: フロント (Edge CDN)、API (Auto Scaling or Serverless)、DB (Read Replica)。
- **ワークロード**: 定期バッチ (レビュー同期・レポート生成) はキューイングで平滑化。

## 4. セキュリティ
- **認証**: SSO (SAML/OIDC) とメール+MFA の選択式。
- **権限管理**: ロールベース (HQ 管理者、HQ 担当、店舗マネージャー、CS、閲覧のみ)。
- **データ保護**: At-rest, In-transit 暗号化、PII 取り扱い最小化。
- **監査ログ**: 全ての更新操作を 1 年間保管、エクスポート可。

## 5. 運用・監視
- **モニタリング**: アプリ、API、ワーカーのメトリクスをダッシュボード表示 (Datadog 等)。
- **アラート**: SLA違反、エラーレート、API 連携失敗に対する閾値設定。
- **ロギング**: 構造化ログ (JSON) とし、長期保存 90 日。

## 6. データ品質
- **整合性**: GBP から取得したデータは 5 分以内に同期。
- **ヒストリカル保持**: レビュー・投稿の履歴を 2 年間保持。
- **データガバナンス**: 承認フローにより更新者・承認者を追跡。

## 7. アクセシビリティ / UX
- **WCAG**: 2.1 AA を目標。
- **ロケール**: 日本語を初期対応、英語はロードマップ。
- **レスポンシブ**: モバイル・タブレット・デスクトップ全対応。

## 8. 法規制 / コンプライアンス
- **個人情報保護法**: 国内顧客データは国内リージョンに保存。
- **利用規約**: GBP API 利用ポリシー遵守、レビュー情報の二次利用制限を明示。

## 9. 導入・運用性
- **オンボーディング**: 10 店舗規模で 1 週間以内に初期設定完了可能な設計。
- **サポート**: ナレッジベースとチャットサポート (営業時間内) を提供。

## 10. 将来拡張
- **API 提供**: 外部向け API はフェーズ 2 で検討。仕様策定のため内部 API を GraphQL で整理。
- **マルチブランド**: 1 テナント内で複数ブランド切替ができる構造を想定。

## 管理
- R-02 タスクの成果物。レビューは四半期ごと。
